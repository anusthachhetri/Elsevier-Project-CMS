{% extends "base.html" %}

{% comment %} {% block content %}
<h1>File Ingestion</h1>

<!-- Step 1: Generate Token -->
<h2>Step 1: Generate Token</h2>
<form method="post">
    {% csrf_token %}
    <input type="hidden" name="action" value="generate_token">
    <button type="submit">Initiate Token</button>
</form>
{% if token %}
    <p>Token: {{ token }}</p>
{% endif %}

<!-- Step 2: Create Batch -->
<h2>Step 2: Create Batch</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="hidden" name="action" value="create_batch">
    <input type="hidden" name="token" value="{{ token }}">
    <label for="file_location">Upload Fingerprint File:</label>
    <input type="file" name="file_location" id="file_location">
    <button type="submit">Create Batch</button>
</form>
{% if batch_id %}
    <p>Batch ID: {{ batch_id }}</p>
{% endif %}

<!-- Step 3: Ingest File -->
<h2>Step 3: Ingest File</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="hidden" name="action" value="ingest_file">
    <input type="hidden" name="token" value="{{ token }}">
    <label for="ingestion_type">Select Ingestion Type:</label>
    <select name="ingestion_type" id="ingestion_type">
        <option value="single">Single File</option>
        <option value="batch">Batch</option>
    </select>
    <input type="hidden" name="batch_id" value="{{ batch_id }}">
    <label for="data_type">Select Data Type:</label>
    <select name="data_type" id="data_type">
        <option value="award">Award</option>
        <option value="opportunity">Opportunity</option>
        <option value="funding-body">Funding</option>
    </select>
    <label for="json_location">Upload JSON File:</label>
    <input type="file" name="json_location" id="json_location">
    <button type="submit">Ingest File</button>
</form>

{% if message %}
    <p>{{ message }}</p>
{% endif %}

{% endblock %} {% endcomment %}


{% comment %} {% block content %}
<!-- Header Section -->
<div class="bg-primary text-white text-center py-3 mb-4">
    <h1>File Ingestion</h1>
</div>

<div class="container">
    <!-- Step 1: Generate Token -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-info text-white">
            <h2>Step 1: Generate Token</h2>
        </div>
        <div class="card-body">
            <form method="post" class="d-flex flex-column gap-3">
                {% csrf_token %}
                <input type="hidden" name="action" value="generate_token">
                <button type="submit" class="btn btn-success">Initiate Token</button>
            </form>
            {% if token %}
                <p class="mt-3"><strong>Token:</strong> {{ token }}</p>
            {% endif %}
        </div>
    </div>

    <!-- Step 2: Create Batch -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-warning text-dark">
            <h2>Step 2: Create Batch</h2>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data" class="d-flex flex-column gap-3">
                {% csrf_token %}
                <input type="hidden" name="action" value="create_batch">
                <input type="hidden" name="token" value="{{ token }}">
                <div class="form-group">
                    <label for="file_location">Upload Fingerprint File:</label>
                    <input type="file" name="file_location" id="file_location" class="form-control">
                </div>
                <button type="submit" class="btn btn-primary">Create Batch</button>
            </form>
            {% if batch_id %}
                <p class="mt-3"><strong>Batch ID:</strong> {{ batch_id }}</p>
            {% endif %}
        </div>
    </div>

    <!-- Step 3: Ingest File -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-success text-white">
            <h2>Step 3: Ingest File</h2>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data" class="d-flex flex-column gap-3">
                {% csrf_token %}
                <input type="hidden" name="action" value="ingest_file">
                <input type="hidden" name="token" value="{{ token }}">
                <div class="form-group">
                    <label for="ingestion_type">Select Ingestion Type:</label>
                    <select name="ingestion_type" id="ingestion_type" class="form-select">
                        <option value="single">Single File</option>
                        <option value="batch">Batch</option>
                    </select>
                </div>
                <input type="hidden" name="batch_id" value="{{ batch_id }}">
                <div class="form-group">
                    <label for="data_type">Select Data Type:</label>
                    <select name="data_type" id="data_type" class="form-select">
                        <option value="award">Award</option>
                        <option value="opportunity">Opportunity</option>
                        <option value="funding-body">Funding</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="json_location">Upload JSON File:</label>
                    <input type="file" name="json_location" id="json_location" class="form-control">
                </div>
                <button type="submit" class="btn btn-danger">Ingest File</button>
            </form>
            {% if message %}
                <p class="mt-3 text-success"><strong>{{ message }}</strong></p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %} {% endcomment %}


{% comment %} {% block title %}File Ingestion{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h2 class="text-center">File Ingestion</h2>

        <!-- Step 1: Generate Token -->
        <h3>Step 1: Generate Token</h3>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="generate_token">
            <button type="submit" class="btn btn-primary">Initiate Token</button>
        </form>
        {% if token %}
            <p class="mt-3">Token: {{ token }}</p>
        {% endif %}

        <!-- Step 2: Create Batch -->
        <h3 class="mt-4">Step 2: Create Batch</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="create_batch">
            <input type="hidden" name="token" value="{{ token }}">
            <div class="mb-3">
                <label for="file_location" class="form-label">Upload Fingerprint File:</label>
                <input type="file" name="file_location" id="file_location" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Create Batch</button>
        </form>
        {% if batch_id %}
            <p class="mt-3">Batch ID: {{ batch_id }}</p>
        {% endif %}

        <!-- Step 3: Ingest File -->
        <h3 class="mt-4">Step 3: Ingest File</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="ingest_file">
            <input type="hidden" name="token" value="{{ token }}">
            <div class="mb-3">
                <label for="ingestion_type" class="form-label">Select Ingestion Type:</label>
                <select name="ingestion_type" id="ingestion_type" class="form-select">
                    <option value="single">Single File</option>
                    <option value="batch">Batch</option>
                </select>
            </div>
            <input type="hidden" name="batch_id" value="{{ batch_id }}">
            <div class="mb-3">
                <label for="data_type" class="form-label">Select Data Type:</label>
                <select name="data_type" id="data_type" class="form-select">
                    <option value="award">Award</option>
                    <option value="opportunity">Opportunity</option>
                    <option value="funding-body">Funding</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="json_location" class="form-label">Upload JSON File:</label>
                <input type="file" name="json_location" id="json_location" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Ingest File</button>
        </form>

        {% if message %}
            <p class="mt-3">{{ message }}</p>
        {% endif %}
    </div>
{% endblock %} 
 {% endcomment %}



<!--working code-->
{% comment %} {% block title %}File Ingestion{% endblock %}

{% block content %}
    <div class="container mt-4">

        <!-- Step 1: Generate Token -->
        <div class="form-section">
            <h3>Step 1: Generate Token</h3>
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="generate_token">
                <button type="submit" class="btn btn-primary">Initiate Token</button>
            </form>
            {% if token %}
                <p class="mt-3">Token: {{ token }}</p>
            {% endif %}
        </div>

        <!-- Step 2: Create Batch -->
        <div class="form-section">
            <h3>Step 2: Create Batch</h3>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="hidden" name="action" value="create_batch">
                <input type="hidden" name="token" value="{{ token }}">
                <div class="mb-3">
                    <label for="file_location" class="form-label">Upload Fingerprint File:</label>
                    <input type="file" name="file_location" id="file_location" class="form-control">
                </div>
                <button type="submit" class="btn btn-primary">Create Batch</button>
            </form>
            {% if batch_id %}
                <p class="mt-3">Batch ID: {{ batch_id }}</p>
            {% endif %}
        </div>

        <!-- Step 3: Ingest File -->
        <div class="form-section">
            <h3>Step 3: Ingest File</h3>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="hidden" name="action" value="ingest_file">
                <input type="hidden" name="token" value="{{ token }}">
                <div class="mb-3">
                    <label for="ingestion_type" class="form-label">Select Ingestion Type:</label>
                    <select name="ingestion_type" id="ingestion_type" class="form-select">
                        <option value="single">Single File</option>
                        <option value="batch">Batch</option>
                    </select>
                </div>
                <input type="hidden" name="batch_id" value="{{ batch_id }}">
                <div class="mb-3">
                    <label for="data_type" class="form-label">Select Data Type:</label>
                    <select name="data_type" id="data_type" class="form-select">
                        <option value="award">Award</option>
                        <option value="opportunity">Opportunity</option>
                        <option value="funding-body">Funding</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="json_location" class="form-label">Upload JSON File:</label>
                    <input type="file" name="json_location" id="json_location" class="form-control">
                </div>
                <button type="submit" class="btn btn-primary">Ingest File</button>
            </form>
            {% if message %}
                <p class="mt-3">{{ message }}</p>
            {% endif %}
        </div>
    </div>
{% endblock %} {% endcomment %}


 <!--date 13-01-2025-->
 {% comment %} {% block title %}File Ingestion{% endblock %}

{% block content %}
<div class="container mt-4">

    <!-- Step 1: Generate Token -->
    <div class="form-section">
        <h3>Step 1: Generate Token</h3>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="generate_token">
            <button type="submit" class="btn btn-primary">Initiate Token</button>
        </form>
        {% if token %}
        <p class="mt-3">Token: {{ token }}</p>
        {% endif %}
    </div>

    <!-- Step 2: Create Batch -->
    <div class="form-section">
        <h3>Step 2: Create Batch</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="create_batch">
            <input type="hidden" name="token" value="{{ token }}">
            <div class="mb-3">
                <label for="file_location" class="form-label">Upload Fingerprint File:</label>
                <input type="file" name="file_location" id="file_location" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Create Batch</button>
        </form>
        {% if batch_id %}
        <p class="mt-3">Batch ID: {{ batch_id }}</p>
        {% endif %}
    </div>

    <!-- Step 3: Ingest File -->
    <div class="form-section">
        <h3>Step 3: Ingest File</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="ingest_file">
            <input type="hidden" name="token" value="{{ token }}">
            <div class="mb-3">
                <label for="ingestion_type" class="form-label">Select Ingestion Type:</label>
                <select name="ingestion_type" id="ingestion_type" class="form-select">
                    <option value="single">Single File</option>
                    <option value="batch">Batch</option>
                </select>
            </div>
            <input type="hidden" name="batch_id" value="{{ batch_id }}">
            <div class="mb-3">
                <label for="data_type" class="form-label">Select Data Type:</label>
                <select name="data_type" id="data_type" class="form-select">
                    <option value="award">Award</option>
                    <option value="opportunity">Opportunity</option>
                    <option value="funding-body">Funding</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="json_location" class="form-label">Upload JSON File:</label>
                <input type="file" name="json_location" id="json_location" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Ingest File</button>
        </form>
        {% if message %}
        <p class="mt-3">{{ message }}</p>
        {% endif %}
    </div>

    <!-- Step 4: Enter Name -->
    <div class="form-section">
        <h3>Step 4: Enter Your Name</h3>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="log_name">
            <div class="mb-3">
                <label for="user_name" class="form-label">Your Name:</label>
                <input type="text" name="user_name" id="user_name" class="form-control" placeholder="Enter your name">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        {% if log_message %}
        <p class="mt-3">Log Entry: {{ log_message }}</p>
        {% endif %}
    </div>

</div>
{% endblock %} {% endcomment %}
<!--time 17 53-->
 {% block title %}File Ingestion{% endblock %}

{% block content %}
<div class="container mt-4">

    <!-- Step 1: Generate Token -->
    <div class="form-section">
        <h3>Step 1: Generate Token</h3>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="generate_token">
            <input type="hidden" name="user_name" value="{{ user_name }}">
            <button type="submit" class="btn btn-primary">Initiate Token</button>
        </form>
        {% if token %}
        <p class="mt-3">Token: {{ token }}</p>
        {% endif %}
    </div>

    <!-- Step 2: Create Batch -->
    <div class="form-section">
        <h3>Step 2: Create Batch</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="create_batch">
            <input type="hidden" name="user_name" value="{{ user_name }}">
            <input type="hidden" name="token" value="{{ token }}">
            <div class="mb-3">
                <label for="file_location" class="form-label">Upload Fingerprint File:</label>
                <input type="file" name="file_location" id="file_location" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Create Batch</button>
        </form>
        {% if batch_id %}
        <p class="mt-3">Batch ID: {{ batch_id }}</p>
        {% endif %}
    </div>

    <!-- Step 3: Ingest File -->
    <div class="form-section">
        <h3>Step 3: Ingest File</h3>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="ingest_file">
            <input type="hidden" name="user_name" value="{{ user_name }}">
            <input type="hidden" name="token" value="{{ token }}">
            <div class="mb-3">
                <label for="ingestion_type" class="form-label">Select Ingestion Type:</label>
                <select name="ingestion_type" id="ingestion_type" class="form-select">
                    <option value="single">Single File</option>
                    <option value="batch">Batch</option>
                </select>
            </div>
            <input type="hidden" name="batch_id" value="{{ batch_id }}">
            <div class="mb-3">
                <label for="data_type" class="form-label">Select Data Type:</label>
                <select name="data_type" id="data_type" class="form-select">
                    <option value="award">Award</option>
                    <option value="opportunity">Opportunity</option>
                    <option value="funding-body">Funding</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="json_location" class="form-label">Upload JSON File:</label>
                <input type="file" name="json_location" id="json_location" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Ingest File</button>
        </form>
        {% if message %}
        <p class="mt-3">{{ message }}</p>
        {% endif %}
    </div>

    <!-- Step 4: Enter Name 
    <div class="form-section">
        <h3>Step 4: Enter Your Name</h3>
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="log_name">
            <div class="mb-3">
                <label for="user_name" class="form-label">Your Name:</label>
                <input type="text" name="user_name" id="user_name" class="form-control" placeholder="Enter your name" value="{{ user_name }}">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        {% if log_message %}
        <p class="mt-3">Log Entry: {{ log_message }}</p>
        {% endif %}
    </div>
-->
</div>
{% endblock %} 